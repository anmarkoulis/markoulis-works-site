name: Bump and Release (main)

on:
  push:
    branches:
      - main

jobs:
  bump:
    name: Bump version (semantic-release)
    uses: Orfium/orfium-github-actions/.github/workflows/bump.yml@master
    secrets:
      RELEASE_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}

  release:
    name: Create GitHub Release
    needs: bump
    uses: Orfium/orfium-github-actions/.github/workflows/release-github.yml@master
    with:
      version: ${{ needs.bump.outputs.latest-release-version }}
      notes: "Release generated by bump workflow on main (commit: ${{ github.sha }})"
      is-production: true
    secrets:
      GH_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
